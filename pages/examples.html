---
layout: default
title: Examples
description: Examples on how to use the FECGSYN
author: Fernando Andreotti
priority: 2
published: true
---


<section class="bs-docs-section">
 In this section exemplary use of the FECGSYN are illustrated. For more information make sure you consult the <a href="{{site.github.url}}/pages/documentation.html"><span class="octicon octicon-globe"></span> Documentation</a>.

<h1 id="datagen" class="page-header">Data Generation</h1>
<!-- datagen 1 -->
  <h2 id="datagen1">Initial example</h2>

  <p> An exemplary dataset can be simply generated and plotted by running the following lines:</p>
  
{% highlight matlab %}
param.fs = 1000; % data generation at 1kHz
param.n = 15*param.fs;
param.SNRfm = -3; % fetal maternal SNR
param.SNRmn = 8; % maternal to noise SNR
param.ntype = {'MA'}; % adding muscular artifact type noise
param.noise_fct = {1}; % noise at constant SNR level
debug = 5; % debug level (5 = max number of plots generated)
out = run_ecg_generator(param,debug);
FECGSYN_plotmix(out) % plots random channels of one of the created datasets
{% endhighlight %}
  
<p>Please consider that various parameters (e.g. location of fetal heart, location of noise sources) are not explicitely defined in the previous example. Therefore, to reproduce physiological conditions, running the code twice will produce considerably different signals. In the following examples, more complex simulations are performed, where further parameters are controlled.</p>
  
<!-- datagen 2 -->
  <h2 id="datagen2">Ellaborate Example</h2>

  <p>This example make use of the <code>exp_datagen1.m</code> function to generate the dataset used in Behar et al 2014.      </p>

{% highlight matlab %}
cd 'directory_to_save'
path = pwd;
exp_datagen1(path,5,false) % generate dataset (may take a few minutes)
load('fecgsyn_c1.mat')
FECGSYN_plotmix(out) % plots random channels of one of the created datasets
{% endhighlight %}

 <h2 id="datagen3">Further examples</h2>
  
  <p>Similarly to the <code>exp_datagen1.m</code> example, the FECGSYN includes three further pre-built routines to data generation. For performance purpose, these functions DO NOT include wfdb support. Nevertheless, this can be simply expanded by using the <code>fecgsyn2wfdb.m</code> function (see this example). Below is a list of further examples included and a short description. For mor information, see  : </p>
  <ul>
    <li><code>FECGSYNDB_datagen.m</code>: This function generates a dateset similar to the one used in Andreotti et al 2016. <b>Attention!</b> Since some parameters generated by the FECGSYN are randomly selected, the database will NOT be identical. For comparison purposes, make sure to download Physionets FECGSYNDB ( <a href="https://www.physionet.org/physiotools/ipmcode/fecgsyn/"><span class="octicon octicon-globe"></span> available here</a>). </li>
    <li><code>exp_datagen2.m</code>: This example performs some additional maternal ECG amplitude changes (after generation) and SNR modulation (during generation). It is useful to stress testing the ability of Template Subtraction techniques in adapting their average template to an ECG with varying amplitude. More information is available in the <a href="{{site.github.url}}/pages/documentation.html#exp_datagen2"><span class="octicon octicon-globe"></span> Documentation</a>. </li>
    <li><code>exp_datagen3.m</code>: </li>
  </ul>


</section>
<!-- -----------FECG EXTRACTION------- -->
<section class="bs-docs-section">
<h1 id="datext" class="page-header">FECG Extraction</h1>

<h2 id="tsc">TS extraction</h2>

Examplary TS

<h2 id="multiext">Multi-method extraction</h2>

Extraction using multiple extraction routines is performed by applying the <code>main_extract_data</code> script, such as:

{% highlight matlab %}
main_extract_data('/FECGSYNDB_PATH/',1,1)
{% endhighlight %}

The function accept directories with both .mat and wfdb formatted data. However, for batch processing, avoid converting data to WFDB format, since it may cause slow downs

</section>

<!-- ----------- Benchmarking ------- -->
<section class="bs-docs-section">
<h1 id="datext" class="page-header">Benchmarking methods</h1>

<h2 id="fqrs">FQRS detection</h2>
Examplary TS

<h2 id="morpho">Morphological features</h2>
Examplary 



</section>
